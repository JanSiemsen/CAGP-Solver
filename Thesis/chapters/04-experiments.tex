\chapter{Experiments}
\section{Experiment Environment}
All geometric operations were implemented using the C++ library CGAL. The visibility graph creation as well as all solvers were implemented in Python (version 3.10.14). For the MIP solvers, we used Gurobi (gurobipy version 11.0.1). The SAT solvers were implemented using PySAT (python-sat version 0.1.8.dev9). Lastly, the CP-SAT solvers were implemented with OR-tools CP-SAT solver (ortools version 9.9.3963).
The benchmarks were run in WSL2 (Windows 11, version 22H2) using an AMD Ryzen 7 7800X3D 8-Core Processor 4.20 GHz and the WSL was assigned 28 GB of RAM.

\section{SAT Solver Choice}
PySAT provides several different SAT solvers. That is why in this section, we will compare them against each other to determine, which one performs the best on our model. Additionally, we will compare using the clauses \cref{eq_SAT:f.3}(CAGP)/\cref{eq_SAT_cf:f.3}(CFCAGP) (version 2) against leaving them out and filtering the solution afterward as described in the SAT Color Optimization chapter (version 1). Due to the parameter sets becoming quite large when comparing all of the SAT solvers, we filtered out a few that performed poorly during testing beforehand. The testing was done using random simple polygons from 100 to 500 vertices and from 10 to 50 holes and each instance size had 30 polygons ~\cite{art-gallery-unicamp-page}. The maximum time given to the solver was 10 minutes. When plotting the solvers in a cactus plot, we can see that both version 1 and version 2 with CaDiCaL103 perform well compared to the other solvers \cref{fig:cactus_SAT}. Indeed, they both were able to solve all instances \cref{tab:SAT_num_solved_v1}/\cref{tab:SAT_num_solved_v2}. But looking at the mean runtimes one cannot determine a clear best solver \cref{tab:mean_low_high_SAT_v1}/\cref{tab:mean_low_high_SAT_v2}. One can also notice that even between instances of the same size there can be a big variance between lowest and highest runtime. As most SAT solvers run on a single core, we can run multiple of them at the same time on a multi-core system and stop as soon as one of them finds a solution. First up, we choose CaDiCaL103 version 1 and version 2. Additionally, by looking at the 3 best alternatives for the 20 worst instances for CaDiCaL103, we choose Glucose42 version 1 and version 2 as well as Glucose4 version 2. These five solvers will be used in parallel in the comparison between MIP vs. SAT vs. CP-SAT.

\begin{figure}[htbp]
\centering
\includegraphics[scale=0.7]{Thesis/figures/minibenchmark_cactus_plot_runtime_SAT_with_holes.png}
\caption{Cactus Plot Comparing the SAT Solver Performance}
\label{fig:cactus_SAT}
\end{figure}

\begin{table}[htbp]
\centering
\footnotesize
\setlength{\tabcolsep}{2pt}
\begin{tabular}{lrrrrrrrrr}
\toprule
 & Cadical103 & Cadical153 & Glucose4 & Glucose42 & Gluecard4 & MapleChrono & MergeSat3 & Minicard & Minisat22 \\
vertices &  &  &  &  &  &  &  &  &  \\
\midrule
100 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 30 \\
200 & 30 & 30 & 30 & 30 & 30 & 27 & 30 & 30 & 30 \\
300 & 30 & 30 & 30 & 30 & 30 & 19 & 30 & 28 & 28 \\
400 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 30 \\
500 & 30 & 29 & 29 & 29 & 29 & 19 & 28 & 26 & 26 \\
\bottomrule
\end{tabular}
\caption{Number of instances solved by the version 1 solvers}
\label{tab:SAT_num_solved_v1}
\end{table}

\begin{table}[htbp]
\centering
\footnotesize
\setlength{\tabcolsep}{2pt}
\begin{tabular}{lrrrrrrrrr}
\toprule
 & Cadical103 & Cadical153 & Glucose4 & Glucose42 & Gluecard4 & MapleChrono & MergeSat3 & Minicard & Minisat22 \\
vertices &  &  &  &  &  &  &  &  &  \\
\midrule
100 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 30 \\
200 & 30 & 30 & 30 & 30 & 30 & 27 & 30 & 30 & 30 \\
300 & 30 & 30 & 29 & 30 & 29 & 20 & 30 & 27 & 27 \\
400 & 30 & 30 & 30 & 30 & 30 & 30 & 30 & 29 & 30 \\
500 & 30 & 30 & 28 & 29 & 28 & 21 & 28 & 27 & 28 \\
\bottomrule
\end{tabular}
\caption{Number of instances solved by the version 2 solvers}
\label{tab:SAT_num_solved_v2}
\end{table}

\begin{table}[htbp]
\centering
\footnotesize
\setlength{\tabcolsep}{2pt}
\begin{tabular}{lrrrrrrr}
\toprule
 & Cadical103 & Cadical153 & Glucose4 & Glucose42 & MergeSat3 & Minicard & Minisat22 \\
vertices &  &  &  &  &  &  &  \\
\midrule
100 & 4 & 0 & 1 & 3 & 0 & 2 & 1 \\
200 & 2 & 2 & 4 & 6 & 0 & 1 & 1 \\
300 & 7 & 3 & 0 & 2 & 1 & 1 & 0 \\
400 & 5 & 1 & 3 & 6 & 0 & 0 & 0 \\
500 & 4 & 0 & 1 & 3 & 0 & 2 & 0 \\
\bottomrule
\end{tabular}
\caption{Number of instances with the lowest runtime for version 1 solvers}
\label{tab:SAT_small_time_v1}
\end{table}

\begin{table}[htbp]
\centering
\footnotesize
\setlength{\tabcolsep}{2pt}
\begin{tabular}{lrrrrrrrrr}
\toprule
 & Cadical103 & Cadical153 & Glucose4 & Glucose42 & Gluecard4 & MapleChrono & MergeSat3 & Minicard & Minisat22 \\
vertices &  &  &  &  &  &  &  &  &  \\
\midrule
100 & 3 & 2 & 0 & 4 & 2 & 0 & 0 & 3 & 5 \\
200 & 6 & 1 & 1 & 2 & 2 & 0 & 1 & 0 & 1 \\
300 & 9 & 2 & 1 & 2 & 1 & 0 & 0 & 0 & 1 \\
400 & 3 & 3 & 1 & 3 & 4 & 0 & 0 & 1 & 0 \\
500 & 10 & 0 & 1 & 4 & 1 & 2 & 1 & 0 & 1 \\
\bottomrule
\end{tabular}
\caption{Number of instances with the lowest runtime for version 2 solvers}
\label{tab:SAT_small_time_v2}
\end{table}


\begin{sidewaystable}[htbp]
\footnotesize
\centering
\setlength{\tabcolsep}{4pt}
\renewcommand{\arraystretch}{3} % Increase row spacing
\begin{tabular}{l|l|l|l|l|l|l|l|l|l}
\toprule
 & \makecell{Cadical103} & \makecell{Cadical153} & \makecell{Glucose4} & \makecell{Glucose42} & \makecell{Gluecard4} & \makecell{MapleChrono} & \makecell{MergeSat3} & \makecell{Minicard} & \makecell{Minisat22} \\
% vertices &  &  &  &  &  &  &  &  &  \\
\midrule
\makecell{100} & \makecell{0.31\\(0.02, 1.21)} & \makecell{0.40\\(0.02, 2.05)} & \makecell{0.51\\(0.01, 2.69)} & \makecell{0.43\\(0.01, 2.33)} & \makecell{0.53\\(0.01, 2.76)} & \makecell{3.92\\(1.74, 10.06)} & \makecell{2.37\\(0.03, 5.63)} & \makecell{0.50\\(0.01, 2.50)} & \makecell{0.50\\(0.01, 2.49)} \\
\makecell{200} & \makecell{8.38\\(0.25, 126.02)} & \makecell{13.56\\(0.20, 193.29)} & \makecell{7.15\\(0.10, 93.77)} & \makecell{6.63\\(0.18, 83.31)} & \makecell{7.24\\(0.10, 94.73)} & \makecell{5.76\\(2.15, 32.44)} & \makecell{11.21\\(1.80, 140.99)} & \makecell{22.95\\(0.10, 299.35)} & \makecell{22.84\\(0.10, 297.74)} \\
\makecell{300} & \makecell{27.56\\(0.36, 143.56)} & \makecell{46.65\\(0.32, 259.42)} & \makecell{66.18\\(0.22, 545.91)} & \makecell{56.65\\(0.27, 414.39)} & \makecell{66.65\\(0.22, 552.79)} & \makecell{32.55\\(3.14, 208.97)} & \makecell{49.19\\(1.63, 362.41)} & \makecell{84.55\\(0.18, 569.67)} & \makecell{83.34\\(0.18, 559.12)} \\
\makecell{400} & \makecell{6.42\\(0.52, 49.18)} & \makecell{9.18\\(0.50, 77.48)} & \makecell{7.59\\(0.14, 53.58)} & \makecell{5.94\\(0.26, 51.72)} & \makecell{7.76\\(0.15, 55.90)} & \makecell{11.11\\(2.78, 57.11)} & \makecell{9.26\\(1.71, 59.87)} & \makecell{36.02\\(0.27, 273.44)} & \makecell{36.22\\(0.27, 271.87)} \\
\makecell{500} & \makecell{40.92\\(0.39, 534.00)} & \makecell{54.20\\(0.51, 347.89)} & \makecell{55.87\\(0.21, 496.94)} & \makecell{46.15\\(0.43, 295.56)} & \makecell{56.47\\(0.22, 501.75)} & \makecell{75.73\\(4.30, 564.11)} & \makecell{56.32\\(1.62, 470.89)} & \makecell{129.31\\(0.17, 494.79)} & \makecell{128.88\\(0.17, 497.51)} \\
\bottomrule
\end{tabular}
\caption{Mean (lowest, highest) runtime for version 1 solvers (SAT)}
\label{tab:mean_low_high_SAT_v1}
\end{sidewaystable}

\begin{sidewaystable}[htbp]
\footnotesize
\centering
\setlength{\tabcolsep}{4pt}
\renewcommand{\arraystretch}{3} % Increase row spacing
\begin{tabular}{l|l|l|l|l|l|l|l|l|l}
\toprule
\makecell{vertices} & \makecell{Cadical103} & \makecell{Cadical153} & \makecell{Glucose4} & \makecell{Glucose42} & \makecell{Gluecard4} & \makecell{MapleChrono} & \makecell{MergeSat3} & \makecell{Minicard} & \makecell{Minisat22} \\
% vertices &  &  &  &  &  &  &  &  &  \\
\midrule
\makecell{100} & \makecell{0.39\\(0.02, 1.69)} & \makecell{0.41\\(0.01, 1.73)} & \makecell{0.52\\(0.01, 2.72)} & \makecell{0.45\\(0.01, 2.56)} & \makecell{0.53\\(0.01, 2.93)} & \makecell{3.77\\(1.52, 8.33)} & \makecell{2.25\\(0.04, 5.34)} & \makecell{0.76\\(0.01, 4.67)} & \makecell{0.79\\(0.01, 4.21)} \\
\makecell{200} & \makecell{7.72\\(0.19, 99.53)} & \makecell{14.48\\(0.12, 201.02)} & \makecell{7.37\\(0.13, 103.08)} & \makecell{7.21\\(0.17, 92.67)} & \makecell{7.41\\(0.05, 95.68)} & \makecell{4.95\\(2.26, 9.65)} & \makecell{10.14\\(1.86, 112.24)} & \makecell{22.26\\(0.11, 261.22)} & \makecell{30.03\\(0.11, 407.12)} \\
\makecell{300} & \makecell{32.44\\(0.56, 249.32)} & \makecell{60.42\\(0.30, 325.82)} & \makecell{38.91\\(0.26, 340.05)} & \makecell{67.42\\(0.25, 398.85)} & \makecell{50.69\\(0.25, 459.07)} & \makecell{56.29\\(3.07, 362.71)} & \makecell{67.10\\(1.61, 574.59)} & \makecell{70.06\\(0.10, 425.06)} & \makecell{64.40\\(0.10, 403.78)} \\
\makecell{400} & \makecell{6.88\\(0.38, 59.87)} & \makecell{10.60\\(0.42, 79.02)} & \makecell{8.49\\(0.18, 70.39)} & \makecell{6.04\\(0.17, 56.54)} & \makecell{7.88\\(0.10, 62.81)} & \makecell{12.80\\(2.92, 52.04)} & \makecell{10.83\\(1.40, 73.03)} & \makecell{38.65\\(0.44, 231.27)} & \makecell{55.98\\(0.44, 367.16)} \\
\makecell{500} & \makecell{32.75\\(0.37, 399.83)} & \makecell{55.10\\(0.50, 437.00)} & \makecell{50.85\\(0.31, 384.77)} & \makecell{45.95\\(0.55, 376.85)} & \makecell{42.20\\(0.23, 430.87)} & \makecell{89.58\\(2.04, 561.99)} & \makecell{31.85\\(1.23, 218.04)} & \makecell{101.84\\(0.83, 336.29)} & \makecell{129.58\\(0.68, 476.19)} \\
\bottomrule
\end{tabular}
\caption{Mean (lowest, highest) runtime for version 2 solvers (SAT)}
\label{tab:mean_low_high_SAT_v2}
\end{sidewaystable}

\section{CP-SAT Formulation Comparison}
In this section, we will compare using the MIP formulation against the SAT formulation with and without the clauses \cref{eq_SAT:f.3}(CAGP)/\cref{eq_SAT_cf:f.3}(CFCAGP) for the CP-SAT solver. We use the same instances as

\begin{table}[htbp]
\centering
\begin{tabular}{llll}
\toprule
 & \makecell{CPSAT\_MIP} & \makecell{CPSAT\_SAT (version 1)} & \makecell{CPSAT\_SAT (version 2)} \\
vertices &  &  &  \\
\midrule
100 & \makecell{0.61\\(0.13, 1.97)} & \makecell{0.58\\(0.09, 2.36)} & \makecell{0.50\\(0.10, 1.70)} \\
200 & \makecell{9.12\\(0.69, 79.63)} & \makecell{8.97\\(0.44, 97.38)} & \makecell{9.87\\(0.40, 107.19)} \\
300 & \makecell{36.19\\(3.17, 198.38)} & \makecell{39.69\\(1.40, 249.66)} & \makecell{43.49\\(0.99, 370.79)} \\
400 & \makecell{25.68\\(7.67, 115.43)} & \makecell{14.58\\(1.64, 80.00)} & \makecell{11.18\\(1.29, 73.82)} \\
500 & \makecell{69.27\\(16.03, 286.05)} & \makecell{67.91\\(4.67, 425.07)} & \makecell{64.40\\(2.78, 443.01)} \\
\bottomrule
\end{tabular}
\caption{Mean (lowest, highest) runtime for solvers (CP-SAT)}
\label{tab:mean_low_high_CPSAT}
\end{table}

\begin{figure}[htbp]
\centering
\includegraphics[scale=0.7]{Thesis/figures/minibenchmark_cactus_plot_runtime_CPSAT_with_holes.png}
\caption{Cactus Plot Comparing the CP-SAT Solver Performance}
\label{fig:cactus_CP-SAT}
\end{figure}

\section{MIP Parameter Set}
Gurobi allows us to set various parameters, which can help improve the runtime of the solver depending on the model. During testing, we used the model.tune() function on a few handpicked instances to determine a good parameter set. Note that setting the parameters drastically improves the runtime of the solver and one might want to further improve them in the future. In the following, we will list the parameters used for the CAGP MIP solver:
\begin{itemize}
  \item Method = 0
  \item NumericFocus = 2
  \item VarBranch = 1
  \item Presolve = 2
  \item PreSparsify = 0
  \item Cuts = 0
  \item Heuristics = 0
\end{itemize}
In the following, we will list the parameters used for the CFCAGP MIP solver:
\begin{itemize}
  \item 
  \item 
  \item 
\end{itemize}

\section{MIP vs. SAT vs. CP-SAT}
In this section, we will compare the performance of the MIP, SAT, and CP-SAT solver against each other on various polygon types.

\subsection{Simple Polygons}

\subsection{Orthogonal Polygons}

\subsection{Simple Polygons with Holes}

\subsection{Random von Koch Polygons}
